{{#if theme_settings.product_list_display_mode '===' 'grid'}}
    {{#if settings.data_tag_enabled}}
        {{> components/products/grid
          products=products
          targetCategoryPath=targetCategoryPath
          listId=listId
          class=class
          show_compare=category.show_compare
          theme_settings=theme_settings
          event="list"
          }}
    {{else}}
        {{> components/products/grid
          products=products
          targetCategoryPath=targetCategoryPath
          listId=listId
          class=class
          show_compare=category.show_compare
          theme_settings=theme_settings
          }}
    {{/if}}
{{else}}
    {{#if settings.data_tag_enabled}}
        {{> components/products/list
          products=products
          targetCategoryPath=targetCategoryPath
          listId=listId
          class=class
          show_compare=category.show_compare
          theme_settings=theme_settings
          event="list"
          }}
    {{else}}
        {{#if name '!==' 'Optional Add-ons'}}
          {{> components/products/list
            products=products
            targetCategoryPath=targetCategoryPath
            listId=listId
            class=class
            show_compare=category.show_compare
            theme_settings=theme_settings
            }}
            {{else}}
        {{> components/products/grid
          products=products
          targetCategoryPath=targetCategoryPath
          listId=listId
          class=class
          show_compare=category.show_compare
          theme_settings=theme_settings
          }}
          {{/if}}
    {{/if}}
{{/if}}

